angular.module("evaluationApp",["ngRoute"]),angular.module("evaluationApp").config(["$routeProvider",function(a){a.when("/login",{templateUrl:"../html/login.html",controller:"authenticationController"}).when("/evaluations/",{templateUrl:"evaluations.html",controller:"evaluationsController"}).when("/templates/",{templateUrl:"templates.html",controller:"templatesController"}).otherwise({redirectTo:"/login"})}]),angular.module("evaluationApp").constant("SERVER_URL","http://dispatch.ru.is/h07/api/v1/"),angular.module("evaluationApp").service("currentUser",function(){return this.token="",this.username="",this.fullName="",this.role="",this.ssn="",this.imageURL="",this}),angular.module("evaluationApp").factory("evaluationResource",function(a,b,c){var d={};return d.loginUser=function(c){return a.post(b+"login",c)},d.getEvaluations=function(){return a.defaults.headers.common.Authorization="Basic "+c.token,a.get(b+"my/evaluations")},d.getTemplates=function(){return a.defaults.headers.common.Authorization="Basic "+c.token,a.get(b+"evaluationtemplates")},d}),angular.module("evaluationApp").controller("authenticationController",["$scope","$location","$rootScope","$routeParams","$http","evaluationResource","currentUser",function(a,b,c,d,e,f,g){a.user="bergthor13",a.pass="123456",a.errorMessage="",a.warningMessage="",a.login=function(){a.errorMessage="",a.warningMessage="";var d={user:a.user,pass:a.pass};return 0===a.user.length||0===a.pass.length?(0===a.user.length&&(a.warningMessage="Þú verður að setja inn notandanafn. "),void(0===a.pass.length&&(a.warningMessage+="Þú verður að setja inn lykilorð. "))):void f.loginUser(d).success(function(d){console.log(g.role),a.getUserData(d),c.$broadcast("userLoggedIn"),b.path("admin"===g.role?"/templates":"/evaluations")}).error(function(){a.errorMessage="Það kom upp villa. Þú hefur mögulega slegið inn rangt notandanafn eða lykilorð."})},a.getUserData=function(a){g.token=a.Token,g.username=a.User.Username,g.fullName=a.User.FullName,g.role=a.User.Role,g.ssn=a.User.SSN,g.imageURL=a.User.ImageURL},c.logout=function(){g.token="",g.username="",g.fullName="",g.role="",g.ssn="",g.imageURL="",b.path("/login")}}]),angular.module("evaluationApp").controller("evaluationsController",["$scope","$location","$rootScope","$routeParams","$http","evaluationResource","currentUser",function(a,b,c,d,e,f,g){return""===g.username?void b.path("/login"):(a.evaluations={},a.fullName=g.fullName,a.infoMessage="",void f.getEvaluations().success(function(b){0===b.length&&(a.infoMessage="Engin kennslumöt, sem þú getur tekið, eru til staðar."),a.evaluations=b}).error(function(){}))}]),angular.module("evaluationApp").controller("indexController",["$scope","$rootScope","currentUser",function(a,b,c){b.$on("userLoggedIn",function(){a.userData=c})}]),angular.module("evaluationApp").controller("templatesController",["$scope","$location","$rootScope","$routeParams","$http","evaluationResource","currentUser",function(a,b,c,d,e,f,g){return""===g.username?void b.path("/login"):(a.templates={},a.fullName=g.fullName,a.infoMessage="",void f.getTemplates().success(function(b){0===b.length&&(a.infoMessage="Engin sniðmát eru til staðar."),a.templates=b}).error(function(){}))}]);